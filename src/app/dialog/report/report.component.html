<div mat-dialog-title>
  <app-user-box [user]="user"></app-user-box>
</div>
<mat-dialog-content class="content">
  <h1>Rapport - Compte rendu</h1>
  <form (keyup.enter)="submit()" (ngSubmit)="submit()" class="form" fxLayout="column">

    <mat-select name="type" placeholder="Type" [(ngModel)]="report.type" required>
      <mat-option *ngFor="let type of types" [value]="type.id">
        {{type.content}}
      </mat-option>
    </mat-select>

    <mat-form-field class="">
      <input [(ngModel)]="report.title" name="title" required matInput placeholder="Intitulé">
    </mat-form-field>
    <mat-form-field>
      <input [(ngModel)]="report.date" name="date" required matInput [matDatepicker]="picker" placeholder="Date">
      <mat-datepicker-toggle matSuffix [for]="picker"></mat-datepicker-toggle>
      <mat-hint align="start">DD/MM/YYYY</mat-hint>
    </mat-form-field>
    <mat-datepicker #picker></mat-datepicker>

    <!--every report-->
    <mat-form-field class="">
      <input [(ngModel)]="report.lieu" name="lieu" required matInput placeholder="Lieu">
    </mat-form-field>
    <mat-form-field class="">
      <input [(ngModel)]="report.objectif" name="objectif" required matInput placeholder="Objectif">
    </mat-form-field>
    <mat-form-field class="">
      <input [(ngModel)]="report.participants" name="participants" required matInput placeholder="Participants">
    </mat-form-field>
    <mat-form-field class="">
      <textarea [(ngModel)]="report.deroulement" name="deroulement" required matInput
                placeholder="Déroulement"></textarea>
       </mat-form-field>
    <mat-form-field class="">
      <input [(ngModel)]="report.intervenants" name="intervenants" required matInput placeholder="Intervenants">
    </mat-form-field>

    <mat-form-field class="" *ngIf="isMission()">
      <input [(ngModel)]="report.attribution" name="attribution" required matInput placeholder="Attribution pendant la mission">
    </mat-form-field>
    <mat-form-field class="" *ngIf="isMission()">
      <input [(ngModel)]="report.problemes" name="problemes" required matInput placeholder="Problèmes recontrés">
    </mat-form-field>
    <mat-form-field class="" *ngIf="isMission()">
      <input [(ngModel)]="report.suggestions" name="suggestions" required matInput placeholder="Suggestions">
    </mat-form-field>
    <mat-form-field class="" *ngIf="isMission()">
      <input [(ngModel)]="report.personnes" name="personnes" required matInput placeholder="Liste des personnes rencontrés">
    </mat-form-field>

    <!--is reunion-->
    <mat-form-field class="" *ngIf="isReunion()">
      <textarea [(ngModel)]="report.points" name="points" required matInput placeholder="Points soulevés"></textarea>
    </mat-form-field>
    <mat-form-field class="" *ngIf="isReunion()">
      <input [(ngModel)]="report.impications" name="impications" matInput
             placeholder="Implication et/ou engagement du MFB">
    </mat-form-field>
    <mat-form-field class="">
      <input [(ngModel)]="report.suite" name="suite" matInput placeholder="Suite du programme">
    </mat-form-field>
    <mat-form-field class="" *ngIf="isFormation()">
    <textarea [(ngModel)]="report.apport" name="apport" required matInput
              placeholder="Apport de la formation sur les activités proffessionnlles de l'agent"></textarea>
    </mat-form-field>

    <!--is formation-->
    <mat-form-field class="" *ngIf="isFormation()">
      <input [(ngModel)]="report.themes" name="themes" matInput placeholder="Thèmes traités">
    </mat-form-field>

    <!--todo documents-->
    <app-files [files]="report.files" name="files" required></app-files>
  </form>
</mat-dialog-content>
<mat-dialog-actions fxLayout="row" class="action-buttons">
  <app-upload-button (fileSelect)="getFiles($event)"></app-upload-button>
  <!-- Can optionally provide a result for the closing dialog. -->
  <button (click)="submit()" mat-button>SOUMETRE RAPPORT</button>
</mat-dialog-actions>
